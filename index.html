<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>wikimedia-streams</title><meta name="description" content="Documentation for wikimedia-streams"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">wikimedia-streams</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h2>wikimedia-streams</h2></div><div class="tsd-panel tsd-typography"><a id="md:wikimedia-streams" class="tsd-anchor"></a><h1><a href="#md:wikimedia-streams">wikimedia-streams</a></h1><img align="right" height="70" alt="wikimedia-streams logo" src="https://raw.githubusercontent.com/ChlodAlejandro/wikimedia-streams/master/assets/wikimedia-streams.png">

<p><a href="https://www.npmjs.org/package/wikimedia-streams"><img src="https://img.shields.io/npm/v/wikimedia-streams.svg?style=flat-square" alt="npm version"></a>
<a href="http://npm-stat.com/charts.html?package=wikimedia-streams"><img src="https://img.shields.io/npm/dm/wikimedia-streams.svg?style=flat-square" alt="npm downloads"></a></p>
<p>wikimedia-streams connects to Wikimedia&#39;s <a href="https://wikitech.wikimedia.org/wiki/Event_Platform/EventStreams">Event Platform EventStreams</a> in order to serve real-time changes to Wikimedia wikis. This entire library is typed, which makes parameter handling well-documented and defined.</p>
<p>This package works best with TypeScript, but also works with plain JavaScript.</p>
<p>By default, this package requires an <a href="https://nodejs.org/docs/latest/api/events.html#class-eventemitter"><code>EventEmitter</code></a> polyfill when used on a browser. Special output files with a bundled EventEmitter polyfill for userscripts and gadgets are available; see below for more information. Really old browser may also need an <a href="https://developer.mozilla.org/en-US/docs/Web/API/EventSource"><code>EventSource</code></a> polyfill; this must be loaded separately, as this package doesn&#39;t provide a version bundled with such a polyfill. On Node.js, native <code>EventEmitter</code> is used, and <a href="https://www.npmjs.com/package/eventsource">eventsource</a> is used as an EventSource polyfill. This dependency structure allows the package to have the same signature in the browser and in Node. </p>
<a id="md:setup" class="tsd-anchor"></a><h2><a href="#md:setup">Setup</a></h2><p>Create a new WikimediaStream with the following:</p>
<pre><code class="language-ts"><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-2">WikimediaStream</span><span class="hl-1"> </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;wikimedia-streams&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">// &quot;recentchange&quot; can be replaced with any valid stream. </span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">stream</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-7">WikimediaStream</span><span class="hl-1">(</span><span class="hl-3">&quot;recentchange&quot;</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<p>If you&#39;re using CommonJS imports, you&#39;ll need to add <code>.default</code> after <code>require()</code>.</p>
<pre><code class="language-ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">WikimediaStream</span><span class="hl-1"> = </span><span class="hl-7">require</span><span class="hl-1">(</span><span class="hl-3">&quot;wikimedia-streams&quot;</span><span class="hl-1">).</span><span class="hl-2">default</span><span class="hl-1">;</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">stream</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-7">WikimediaStream</span><span class="hl-1">(</span><span class="hl-3">&quot;recentchange&quot;</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<p>Additional files are available under <code>dist/browser</code> for browser use:</p>
<ul>
<li><code>index.js</code> – for use in <code>&lt;script&gt;</code> tags and non-wiki pages (requires an EventEmitter polyfill)<ul>
<li><code>WikimediaStreams</code> global exists, <code>WikimediaStreams</code> namespace is <strong>NOT</strong> exported</li>
</ul>
</li>
<li><code>bundle.js</code> – for use in userscripts<ul>
<li><code>WikimediaStreams</code> global exists, <code>WikimediaStreams</code> namespace is <strong>NOT</strong> exported</li>
</ul>
</li>
<li><code>lib.js</code> – for use in MediaWiki-namespace JS files and gadgets<ul>
<li><code>WikimediaStreams</code> global does <strong>NOT</strong> exist, <code>WikimediaStreams</code> namespace is exported</li>
</ul>
</li>
</ul>
<p>If you&#39;re using wikimedia-streams in a browser, you have multiple options:</p>
<ul>
<li>If you&#39;re using a bundler (Webpack, Browserify, etc.), you can use the same code as above.</li>
<li>If you&#39;re using a script tag (through JSDelivr, etc.), you&#39;ll need to load
both wikimedia-streams and an <code>EventEmitter</code> polyfill.<pre><code class="language-html"><span class="hl-4">&lt;!-- Load `eventemitter3` for an EventEmitter polyfill. --&gt;</span><br/><span class="hl-8">&lt;</span><span class="hl-9">script</span><span class="hl-10"> </span><span class="hl-11">src</span><span class="hl-10">=</span><span class="hl-12">&quot;https://tools-static.wmflabs.org/cdnjs/ajax/libs/eventemitter3/5.0.1/index.min.js&quot;</span><span class="hl-10"> </span><span class="hl-13">/</span><span class="hl-8">&gt;</span><br/><span class="hl-1">&lt;!--</span><span class="hl-10"> </span><span class="hl-2">Try</span><span class="hl-10"> </span><span class="hl-2">to</span><span class="hl-10"> </span><span class="hl-2">self</span><span class="hl-1">-</span><span class="hl-2">host</span><span class="hl-10"> </span><span class="hl-2">wikimedia</span><span class="hl-1">-</span><span class="hl-2">streams</span><span class="hl-10"> </span><span class="hl-0">if</span><span class="hl-10"> </span><span class="hl-2">you</span><span class="hl-10"> </span><span class="hl-2">can</span><span class="hl-1">!</span><span class="hl-10"> </span><span class="hl-1">--&gt;</span><br/><span class="hl-8">&lt;</span><span class="hl-9">script</span><span class="hl-10"> </span><span class="hl-11">src</span><span class="hl-1">=</span><span class="hl-3">&quot;https://cdn.jsdelivr.net/npm/wikimedia-streams@latest&quot;</span><span class="hl-10"> </span><span class="hl-8">/&gt;</span><br/><span class="hl-8">&lt;</span><span class="hl-9">script</span><span class="hl-8">&gt;</span><br/><span class="hl-10">    const stream = new WikimediaStream.default(&quot;recentchange&quot;);</span><br/><span class="hl-8">&lt;/</span><span class="hl-9">script</span><span class="hl-8">&gt;</span>
</code><button>Copy</button></pre>
</li>
<li>If you&#39;re using <code>mw.loader.load</code> (userscripts), you have two options:<ul>
<li>You can load both wikimedia-streams and an <code>EventEmitter</code> polyfill.<pre><code class="language-js"><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-2">mw</span><span class="hl-1">.</span><span class="hl-2">loader</span><span class="hl-1">.</span><span class="hl-7">load</span><span class="hl-1">(</span><span class="hl-3">&quot;https://tools-static.wmflabs.org/cdnjs/ajax/libs/eventemitter3/5.0.1/index.min.js&quot;</span><span class="hl-1">);</span><br/><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-2">mw</span><span class="hl-1">.</span><span class="hl-2">loader</span><span class="hl-1">.</span><span class="hl-7">load</span><span class="hl-1">(</span><span class="hl-3">&quot;&lt;URL to a reupload of dist/browser/index.min.js&gt;&quot;</span><span class="hl-1">);</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">stream</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-2">WikimediaStream</span><span class="hl-1">.</span><span class="hl-7">default</span><span class="hl-1">(</span><span class="hl-3">&quot;recentchange&quot;</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
</li>
<li>You can also load a version of wikimedia-streams that includes an <code>EventEmitter</code> polyfill.
Use this in case you would like to upload the library on-wiki or would like to cut down on
request count.<pre><code class="language-js"><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-2">mw</span><span class="hl-1">.</span><span class="hl-2">loader</span><span class="hl-1">.</span><span class="hl-7">load</span><span class="hl-1">(</span><span class="hl-3">&quot;&lt;URL to a reupload of dist/browser/bundle.min.js&gt;&quot;</span><span class="hl-1">);</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">stream</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-2">WikimediaStream</span><span class="hl-1">.</span><span class="hl-7">default</span><span class="hl-1">(</span><span class="hl-3">&quot;recentchange&quot;</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
</li>
</ul>
</li>
<li>If you&#39;re developing a gadget, you should probably use a MediaWiki-namespace JS file
for security reasons. If <code>dist/browser/lib.js</code> is uploaded as <code>MediaWiki:Gadget-wikimedia-streams.js</code>,
you can import it using a gadget dependency.<pre><code class="language-wikitext">&lt;!-- MediaWiki:Gadgets-definition --&gt;
* mygadget[ResourceLoader |dependencies=ext.gadget.wikimedia-streams]|mygadget.js
* wikimedia-streams[ResourceLoader |package |hidden]|wikimedia-streams.js
</code><button>Copy</button></pre>
<pre><code class="language-js"><span class="hl-4">// MediaWiki:Gadget-mygadget.js</span><br/><span class="hl-2">mw</span><span class="hl-1">.</span><span class="hl-2">loader</span><span class="hl-1">.</span><span class="hl-7">using</span><span class="hl-1">(</span><span class="hl-3">&quot;ext.gadget.wikimedia-streams&quot;</span><span class="hl-1">).</span><span class="hl-7">then</span><span class="hl-1">(</span><span class="hl-5">function</span><span class="hl-1"> (</span><span class="hl-2">require</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-5">var</span><span class="hl-1"> </span><span class="hl-2">WikimediaStream</span><span class="hl-1"> = </span><span class="hl-7">require</span><span class="hl-1">(</span><span class="hl-3">&quot;wikimedia-streams&quot;</span><span class="hl-1">).</span><span class="hl-2">default</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-5">var</span><span class="hl-1"> </span><span class="hl-2">stream</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-7">WikimediaStream</span><span class="hl-1">(</span><span class="hl-3">&quot;recentchange&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-4">// or if `|package` is set in mygadget&#39;s definition</span><br/><span class="hl-5">var</span><span class="hl-1"> </span><span class="hl-2">WikimediaStream</span><span class="hl-1"> = </span><span class="hl-7">require</span><span class="hl-1">(</span><span class="hl-3">&quot;ext.gadget.wikimedia-streams&quot;</span><span class="hl-1">).</span><span class="hl-2">default</span><span class="hl-1">;</span><br/><span class="hl-5">var</span><span class="hl-1"> </span><span class="hl-2">stream</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-7">WikimediaStream</span><span class="hl-1">(</span><span class="hl-3">&quot;recentchange&quot;</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
</li>
</ul>
<a id="md:usage" class="tsd-anchor"></a><h2><a href="#md:usage">Usage</a></h2><p>After setup, you can listen to sent events using <code>.on</code>.</p>
<pre><code class="language-ts"><span class="hl-2">stream</span><span class="hl-1">.</span><span class="hl-7">on</span><span class="hl-1">(</span><span class="hl-3">&quot;recentchange&quot;</span><span class="hl-1">, (</span><span class="hl-2">data</span><span class="hl-1">, </span><span class="hl-2">event</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">wiki</span><span class="hl-1"> === </span><span class="hl-3">&quot;enwiki&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-4">// Edits from the English Wikipedia</span><br/><span class="hl-1">        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">title</span><span class="hl-1">); </span><span class="hl-4">// Output the page title.</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">});</span>
</code><button>Copy</button></pre>
<p>Don&#39;t forget to close the stream when you&#39;re done (or else Node will remain open).</p>
<pre><code class="language-ts"><span class="hl-2">stream</span><span class="hl-1">.</span><span class="hl-7">close</span><span class="hl-1">();</span>
</code><button>Copy</button></pre>
<p>You can also use <code>.on(&quot;mediawiki.recentchange&quot;)</code> to listen to recent changes. A full list of streams and their available aliases are provided below.</p>
<a id="md:available-streams" class="tsd-anchor"></a><h3><a href="#md:available-streams">Available streams</a></h3><table>
<thead>
<tr>
<th><strong>Stream</strong></th>
<th><strong>Aliases</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody><tr>
<td><a href="https://stream.wikimedia.org/v2/stream/eventgate-main.test.event">eventgate-main.test.event</a></td>
<td><code>test</code></td>
<td>Testing event.</td>
</tr>
<tr>
<td><a href="https://stream.wikimedia.org/v2/stream/mediawiki.page-create">mediawiki.page-create</a></td>
<td><code>page-create</code></td>
<td>Newly-created pages.</td>
</tr>
<tr>
<td><a href="https://stream.wikimedia.org/v2/stream/mediawiki.page-delete">mediawiki.page-delete</a></td>
<td><code>page-delete</code></td>
<td>Deleted pages.</td>
</tr>
<tr>
<td><a href="https://stream.wikimedia.org/v2/stream/mediawiki.page-links-change">mediawiki.page-links-change</a></td>
<td><code>page-links-change</code></td>
<td>Changes to page links.</td>
</tr>
<tr>
<td><a href="https://stream.wikimedia.org/v2/stream/mediawiki.page-move">mediawiki.page-move</a></td>
<td><code>page-move</code></td>
<td>Page moves.</td>
</tr>
<tr>
<td><a href="https://stream.wikimedia.org/v2/stream/mediawiki.page-properties-change">mediawiki.page-properties-change</a></td>
<td><code>page-properties-change</code></td>
<td>Changes to page properties.</td>
</tr>
<tr>
<td><a href="https://stream.wikimedia.org/v2/stream/mediawiki.page-undelete">mediawiki.page-undelete</a></td>
<td><code>page-undelete</code></td>
<td>Undeleted pages.</td>
</tr>
<tr>
<td><a href="https://stream.wikimedia.org/v2/stream/mediawiki.recentchange">mediawiki.recentchange</a></td>
<td><code>recentchange</code></td>
<td>Recent changes. The recent changes schema is drastically different from the schema of other streams.</td>
</tr>
<tr>
<td><a href="https://stream.wikimedia.org/v2/stream/mediawiki.revision-create">mediawiki.revision-create</a></td>
<td><code>revision-create</code></td>
<td>Edits to pages.</td>
</tr>
<tr>
<td><a href="https://stream.wikimedia.org/v2/stream/mediawiki.revision-tags-change">mediawiki.revision-tags-change</a></td>
<td></td>
<td>Changes to revision tags. Added in v0.4.0.</td>
</tr>
<tr>
<td><a href="https://stream.wikimedia.org/v2/stream/mediawiki.revision-visibility-change">mediawiki.revision-visibility-change</a></td>
<td></td>
<td>Changes to revision visibility (caused by suppression or revision deletion).</td>
</tr>
</tbody></table>
<a id="md:removed-streams" class="tsd-anchor"></a><h3><a href="#md:removed-streams">Removed streams</a></h3><table>
<thead>
<tr>
<th><strong>Stream</strong></th>
<th><strong>Aliases</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody><tr>
<td><a href="https://stream.wikimedia.org/v2/stream/mediawiki.revision-score">mediawiki.revision-score</a></td>
<td><code>revision-score</code></td>
<td>ORES scores for edits to pages. Removed as of v2.0.0 (09-14-2023; <a href="https://phabricator.wikimedia.org/T342116">T342116</a>)</td>
</tr>
</tbody></table>
<a id="md:multiple-streams" class="tsd-anchor"></a><h3><a href="#md:multiple-streams">Multiple streams</a></h3><p>You can listen to multiple streams at once by passing an array as the parameter when creating a WikimediaStream.</p>
<pre><code class="language-ts"><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-2">WikimediaStream</span><span class="hl-1"> </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;wikimedia-streams&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">stream</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-7">WikimediaStream</span><span class="hl-1">([</span><span class="hl-3">&quot;page-create&quot;</span><span class="hl-1">, </span><span class="hl-3">&quot;revision-create&quot;</span><span class="hl-1">]);</span><br/><br/><span class="hl-2">stream</span><span class="hl-1">.</span><span class="hl-7">on</span><span class="hl-1">(</span><span class="hl-3">&quot;page-create&quot;</span><span class="hl-1">, (</span><span class="hl-2">data</span><span class="hl-1">, </span><span class="hl-2">event</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">database</span><span class="hl-1"> === </span><span class="hl-3">&quot;enwiki&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-4">// Page created on the English Wikipedia.</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">});</span><br/><span class="hl-2">stream</span><span class="hl-1">.</span><span class="hl-7">on</span><span class="hl-1">(</span><span class="hl-3">&quot;revision-create&quot;</span><span class="hl-1">, (</span><span class="hl-2">data</span><span class="hl-1">, </span><span class="hl-2">event</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">database</span><span class="hl-1"> === </span><span class="hl-3">&quot;enwiki&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-4">// Page edited on the English Wikipedia.</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">});</span>
</code><button>Copy</button></pre>
<a id="md:filtering" class="tsd-anchor"></a><h2><a href="#md:filtering">Filtering</a></h2><p>You can filter a stream using masks. An event must match the provided mask to be accepted.
Filters are built using the <code>filter</code> function, and can only filter one stream type at a time
to ensure proper typing.</p>
<pre><code class="language-ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">filter</span><span class="hl-1"> = </span><span class="hl-2">stream</span><span class="hl-1">.</span><span class="hl-7">filter</span><span class="hl-1">(</span><span class="hl-3">&quot;mediawiki.recentchange&quot;</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<p>Three filter modes are provided; these mirror the types used by <a href="https://doc.wikimedia.org/pywikibot/stable/api_ref/pywikibot.comms.html#comms.eventstreams.EventStreams.register_filter">Pywikibot</a> for parity:</p>
<ul>
<li><code>none</code> skips the event if it matches the mask. If it skips no event, it proceeds to <code>all</code> filters.</li>
<li><code>all</code> skips the event if it does not match all <code>all</code> filters. If it skips no event, it proceeds to <code>any</code> filters.</li>
<li><code>any</code> skips the event if it does not match any <code>any</code> filters.</li>
</ul>
<pre><code class="language-ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">filter1</span><span class="hl-1"> = </span><span class="hl-2">stream</span><span class="hl-1">.</span><span class="hl-7">filter</span><span class="hl-1">(</span><span class="hl-3">&quot;mediawiki.recentchange&quot;</span><span class="hl-1">);</span><br/><span class="hl-2">filter1</span><span class="hl-1">.</span><span class="hl-7">none</span><span class="hl-1">({ </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;categorize&quot;</span><span class="hl-1"> })</span><br/><span class="hl-1">    .</span><span class="hl-7">on</span><span class="hl-1">((</span><span class="hl-2">event</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">// Only edits that aren&#39;t &quot;categorize&quot; types will be accessible here.</span><br/><span class="hl-1">    });</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">filter2</span><span class="hl-1"> = </span><span class="hl-2">stream</span><span class="hl-1">.</span><span class="hl-7">filter</span><span class="hl-1">(</span><span class="hl-3">&quot;mediawiki.recentchange&quot;</span><span class="hl-1">);</span><br/><span class="hl-2">filter2</span><br/><span class="hl-1">    .</span><span class="hl-7">all</span><span class="hl-1">({ </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;edit&quot;</span><span class="hl-1"> })</span><br/><span class="hl-1">    .</span><span class="hl-7">all</span><span class="hl-1">({ </span><span class="hl-2">wiki:</span><span class="hl-1"> </span><span class="hl-3">&quot;enwiki&quot;</span><span class="hl-1"> })</span><br/><span class="hl-1">    .</span><span class="hl-7">on</span><span class="hl-1">((</span><span class="hl-2">event</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">// Only edits on the English Wikipedia will be accessible here.</span><br/><span class="hl-1">    });</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">filter3</span><span class="hl-1"> = </span><span class="hl-2">stream</span><span class="hl-1">.</span><span class="hl-7">filter</span><span class="hl-1">(</span><span class="hl-3">&quot;mediawiki.recentchange&quot;</span><span class="hl-1">);</span><br/><span class="hl-2">filter3</span><br/><span class="hl-1">    .</span><span class="hl-7">any</span><span class="hl-1">({ </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;commonswiki&quot;</span><span class="hl-1"> })</span><br/><span class="hl-1">    .</span><span class="hl-7">any</span><span class="hl-1">({ </span><span class="hl-2">wiki:</span><span class="hl-1"> </span><span class="hl-3">&quot;enwiki&quot;</span><span class="hl-1"> })</span><br/><span class="hl-1">    .</span><span class="hl-7">on</span><span class="hl-1">((</span><span class="hl-2">event</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">// Only changes on the English Wikipedia and Wikimedia Commons will be accessible here.</span><br/><span class="hl-1">    });</span>
</code><button>Copy</button></pre>
<p>Note that you are supposed to chain the filter functions together and in order. Type assistance
will not be available otherwise. Due to how the types are constructed, compile-time errors are
emitted to ensure proper use of the code. This is not available in JavaScript, and can lead to
unexpected behavior if filters are used improperly.</p>
<pre><code class="language-ts"><span class="hl-4">// This is an example of IMPROPER usage!!!</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">filter</span><span class="hl-1"> = </span><span class="hl-2">stream</span><span class="hl-1">.</span><span class="hl-7">filter</span><span class="hl-1">(</span><span class="hl-3">&quot;mediawiki.recentchange&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-2">filter</span><span class="hl-1">.</span><span class="hl-7">all</span><span class="hl-1">({ </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;categorize&quot;</span><span class="hl-1"> })</span><br/><span class="hl-1">    .</span><span class="hl-7">on</span><span class="hl-1">((</span><span class="hl-2">event</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">// This will never be called.</span><br/><span class="hl-1">    });</span><br/><br/><span class="hl-2">filter</span><span class="hl-1">.</span><span class="hl-7">all</span><span class="hl-1">({ </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;edit&quot;</span><span class="hl-1"> })</span><br/><span class="hl-1">    .</span><span class="hl-7">on</span><span class="hl-1">((</span><span class="hl-2">event</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">// This will never be called.</span><br/><span class="hl-1">    });</span><br/><br/><span class="hl-4">// By using the above two, the functions in `on` will never be called, since the event will</span><br/><span class="hl-4">// only pass through the filter if the edit has a type of both &quot;categorize&quot; and &quot;edit&quot;, which</span><br/><span class="hl-4">// is impossible.</span><br/><br/><span class="hl-4">// This is the correct way to clone filters:</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">filter2</span><span class="hl-1"> = </span><span class="hl-2">stream</span><span class="hl-1">.</span><span class="hl-7">filter</span><span class="hl-1">(</span><span class="hl-3">&quot;mediawiki.recentchange&quot;</span><span class="hl-1">);</span><br/><span class="hl-2">filter2</span><span class="hl-1">.</span><span class="hl-7">clone</span><span class="hl-1">().</span><span class="hl-7">all</span><span class="hl-1">({ </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;categorize&quot;</span><span class="hl-1"> })</span><br/><span class="hl-1">    .</span><span class="hl-7">on</span><span class="hl-1">((</span><span class="hl-2">event</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">// This will be called.</span><br/><span class="hl-1">    });</span><br/><span class="hl-2">filter2</span><span class="hl-1">.</span><span class="hl-7">clone</span><span class="hl-1">().</span><span class="hl-7">all</span><span class="hl-1">({ </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;categorize&quot;</span><span class="hl-1"> })</span><br/><span class="hl-1">    .</span><span class="hl-7">on</span><span class="hl-1">((</span><span class="hl-2">event</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">// This will be called.</span><br/><span class="hl-1">    });</span>
</code><button>Copy</button></pre>
<pre><code class="language-ts"><span class="hl-4">// This is an example of IMPROPER usage!!!</span><br/><br/><span class="hl-2">stream</span><span class="hl-1">.</span><span class="hl-7">filter</span><span class="hl-1">(</span><span class="hl-3">&quot;mediawiki.recentchange&quot;</span><span class="hl-1">)</span><br/><span class="hl-1">    .</span><span class="hl-7">all</span><span class="hl-1">({ </span><span class="hl-2">wiki:</span><span class="hl-1"> </span><span class="hl-3">&quot;enwiki&quot;</span><span class="hl-1"> })</span><br/><span class="hl-1">    .</span><span class="hl-7">none</span><span class="hl-1">({ </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;categorize&quot;</span><span class="hl-1"> }) </span><span class="hl-4">// This will fail on compile time.</span><br/><span class="hl-1">    .</span><span class="hl-7">on</span><span class="hl-1">((</span><span class="hl-2">event</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">// Though this will correctly provide English Wikipedia new/edit/log events,</span><br/><span class="hl-1">        </span><span class="hl-4">// types *may* be incorrect.</span><br/><span class="hl-1">    });</span>
</code><button>Copy</button></pre>
<p>Due to <a href="https://github.com/microsoft/TypeScript/issues/4196">limitations in TypeScript</a>,
the received type may be too broad compared to the actual values of the types.</p>
<a id="md:examples" class="tsd-anchor"></a><h3><a href="#md:examples">Examples</a></h3><ol>
<li>Get all edits from the English Wikipedia.<pre><code class="language-ts"><span class="hl-2">stream</span><span class="hl-1">.</span><span class="hl-7">filter</span><span class="hl-1">(</span><span class="hl-3">&quot;mediawiki.recentchange&quot;</span><span class="hl-1">)</span><br/><span class="hl-1">.</span><span class="hl-7">all</span><span class="hl-1">({ </span><span class="hl-2">wiki:</span><span class="hl-1"> </span><span class="hl-3">&quot;enwiki&quot;</span><span class="hl-1"> })</span><br/><span class="hl-1">.</span><span class="hl-7">all</span><span class="hl-1">({ </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;edit&quot;</span><span class="hl-1"> })</span><br/><span class="hl-1">.</span><span class="hl-7">on</span><span class="hl-1">((</span><span class="hl-2">event</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-3">`New edit from </span><span class="hl-5">${</span><span class="hl-2">event</span><span class="hl-10">.</span><span class="hl-2">user</span><span class="hl-5">}</span><span class="hl-3"> on &quot;</span><span class="hl-5">${</span><span class="hl-2">event</span><span class="hl-10">.</span><span class="hl-2">title</span><span class="hl-5">}</span><span class="hl-3">&quot;`</span><span class="hl-1">)</span><br/><span class="hl-1">});</span>
</code><button>Copy</button></pre>
</li>
<li>Get all log events from the English Wikipedia.<pre><code class="language-ts"><span class="hl-2">stream</span><span class="hl-1">.</span><span class="hl-7">filter</span><span class="hl-1">(</span><span class="hl-3">&quot;mediawiki.recentchange&quot;</span><span class="hl-1">)</span><br/><span class="hl-1">.</span><span class="hl-7">all</span><span class="hl-1">({ </span><span class="hl-2">wiki:</span><span class="hl-1"> </span><span class="hl-3">&quot;enwiki&quot;</span><span class="hl-1"> })</span><br/><span class="hl-1">.</span><span class="hl-7">all</span><span class="hl-1">({ </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;log&quot;</span><span class="hl-1"> })</span><br/><span class="hl-1">.</span><span class="hl-7">on</span><span class="hl-1">((</span><span class="hl-2">event</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-3">`</span><span class="hl-5">${</span><span class="hl-2">event</span><span class="hl-10">.</span><span class="hl-2">user</span><span class="hl-5">}</span><span class="hl-3"> performed </span><span class="hl-5">${</span><span class="hl-2">event</span><span class="hl-10">.</span><span class="hl-2">log_type</span><span class="hl-5">}</span><span class="hl-3">/</span><span class="hl-5">${</span><span class="hl-2">event</span><span class="hl-10">.</span><span class="hl-2">log_action</span><span class="hl-5">}</span><span class="hl-3"> on &quot;</span><span class="hl-5">${</span><span class="hl-2">event</span><span class="hl-10">.</span><span class="hl-2">title</span><span class="hl-5">}</span><span class="hl-3">&quot;`</span><span class="hl-1">)</span><br/><span class="hl-1">});</span>
</code><button>Copy</button></pre>
</li>
<li>Get edits from all wikis with a byte difference of greater than 500.<pre><code class="language-ts"><span class="hl-2">stream</span><span class="hl-1">.</span><span class="hl-7">filter</span><span class="hl-1">(</span><span class="hl-3">&quot;mediawiki.recentchange&quot;</span><span class="hl-1">)</span><br/><span class="hl-1">.</span><span class="hl-7">all</span><span class="hl-1">({ </span><span class="hl-2">wiki:</span><span class="hl-1"> </span><span class="hl-3">&quot;enwiki&quot;</span><span class="hl-1"> })</span><br/><span class="hl-1">.</span><span class="hl-7">all</span><span class="hl-1">({ </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;edit&quot;</span><span class="hl-1"> })</span><br/><span class="hl-1">.</span><span class="hl-7">on</span><span class="hl-1">((</span><span class="hl-2">event</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">// Byte difference is a computed value. This must take place in manual filter.</span><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">byteDiff</span><span class="hl-1"> = </span><span class="hl-2">event</span><span class="hl-1">.</span><span class="hl-2">length</span><span class="hl-1">.</span><span class="hl-2">new</span><span class="hl-1"> - </span><span class="hl-2">event</span><span class="hl-1">.</span><span class="hl-2">length</span><span class="hl-1">.</span><span class="hl-2">old</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">Math</span><span class="hl-1">.</span><span class="hl-7">abs</span><span class="hl-1">(</span><span class="hl-2">byteDiff</span><span class="hl-1">) &gt; </span><span class="hl-14">500</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-3">`</span><span class="hl-5">${</span><span class="hl-2">byteDiff</span><span class="hl-10"> </span><span class="hl-1">&gt;</span><span class="hl-10"> </span><span class="hl-14">0</span><span class="hl-10"> </span><span class="hl-1">?</span><span class="hl-10"> </span><span class="hl-3">`+</span><span class="hl-5">${</span><span class="hl-2">byteDiff</span><span class="hl-5">}</span><span class="hl-3">`</span><span class="hl-10"> </span><span class="hl-1">:</span><span class="hl-10"> </span><span class="hl-2">byteDiff</span><span class="hl-5">}</span><span class="hl-3"> bytes </span><span class="hl-5">${</span><span class="hl-2">event</span><span class="hl-10">.</span><span class="hl-2">user</span><span class="hl-5">}</span><span class="hl-3"> on &quot;</span><span class="hl-5">${</span><span class="hl-2">event</span><span class="hl-10">.</span><span class="hl-2">title</span><span class="hl-5">}</span><span class="hl-3">&quot;`</span><span class="hl-1">)</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">});</span>
</code><button>Copy</button></pre>
</li>
</ol>
<a id="md:resuming-streams" class="tsd-anchor"></a><h2><a href="#md:resuming-streams">Resuming streams</a></h2><blockquote>
<p>[!NOTE]
This feature is not available in browsers.</p>
</blockquote>
<p>After every received event, the stream stores the ID of the last event that was sent.
This ID can be used to continue streams, so that you don&#39;t miss any events. You can
also save this ID to a file when gracefully stopping for a restart, and use it again
at a later time. Note that streams cannot be replayed indefinitely; EventStreams may
only hold an event <a href="https://wikitech.wikimedia.org/wiki/Event_Platform/EventStreams#Historical_Consumption">for a certain duration</a>.</p>
<pre><code class="language-ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">stream</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-7">WikimediaStream</span><span class="hl-1">( </span><span class="hl-3">&#39;recentchange&#39;</span><span class="hl-1"> );</span><br/><br/><span class="hl-4">// Stopping!</span><br/><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-7">writeFileSync</span><span class="hl-1">( </span><span class="hl-3">&#39;last-event.json&#39;</span><span class="hl-1">, </span><span class="hl-6">JSON</span><span class="hl-1">.</span><span class="hl-7">stringify</span><span class="hl-1">( </span><span class="hl-2">stream</span><span class="hl-1">.</span><span class="hl-2">lastEventId</span><span class="hl-1"> ) );</span><br/><span class="hl-2">stream</span><span class="hl-1">.</span><span class="hl-7">close</span><span class="hl-1">();</span><br/><br/><span class="hl-4">// Restarting!</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">stream2</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-7">WikimediaStream</span><span class="hl-1">( </span><span class="hl-3">&#39;recentchange&#39;</span><span class="hl-1">, {</span><br/><span class="hl-1">    </span><span class="hl-2">lastEventId:</span><span class="hl-1"> </span><span class="hl-6">JSON</span><span class="hl-1">.</span><span class="hl-7">parse</span><span class="hl-1">( </span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-7">readFileSync</span><span class="hl-1">( </span><span class="hl-3">&#39;last-event.json&#39;</span><span class="hl-1"> ).</span><span class="hl-7">toString</span><span class="hl-1">( </span><span class="hl-3">&#39;utf8&#39;</span><span class="hl-1"> ) )</span><br/><span class="hl-1">} );</span>
</code><button>Copy</button></pre>
<p>When re-opening a previously closed stream, the library will automatically resume
from the last event that it processed. To avoid this, instantiate a new <code>WikimediaStream</code>.</p>
<a id="md:user-agent" class="tsd-anchor"></a><h2><a href="#md:user-agent">User agent</a></h2><blockquote>
<p>[!NOTE]
This feature is not available in browsers.</p>
</blockquote>
<p>Wikimedia sites require developers to follow the <a href="https://meta.wikimedia.org/wiki/User-Agent_policy">User-Agent policy</a>, which requires a descriptive user agent to be sent with requests. By default, wikimedia-streams will send a generic <code>wikimedia-streams/${VERSION}</code> User-Agent header. You can set a custom user agent by providing the <code>headers.User-Agent</code> option when creating the stream object.</p>
<pre><code class="language-ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">stream</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-7">WikimediaStream</span><span class="hl-1">(</span><span class="hl-3">&quot;recentchange&quot;</span><span class="hl-1">, {</span><br/><span class="hl-1">    </span><span class="hl-2">headers:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-3">&quot;User-Agent&quot;</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-3">&quot;MyCoolTool/1.0 (https://example.com/MyCoolTool)&quot;</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">});</span>
</code><button>Copy</button></pre>
<a id="md:canary-events" class="tsd-anchor"></a><h2><a href="#md:canary-events">Canary events</a></h2><p><a href="https://wikitech.wikimedia.org/wiki/Event_Platform/EventStreams#Canary_Events">Canary events</a>
are events that are sent to ensure that the stream is still active. These events are filtered
out by wikimedia-streams by default. To enable them, set the <code>enableCanary</code> option to <code>true</code>.
Note that you will be required to filter out these events yourself, or process them accordingly.</p>
<a id="md:license" class="tsd-anchor"></a><h2><a href="#md:license">License</a></h2><p>Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
you may not use this file except in compliance with the License.
You may obtain a copy of the License at <a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a>.</p>
<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>
<p>Type documentation is partially derived from <a href="https://stream.wikimedia.org/?doc">https://stream.wikimedia.org/?doc</a>, also licensed under the Apache License, Version 2.0. <code>spec.json</code> is downloaded from <a href="https://stream.wikimedia.org/?spec">https://stream.wikimedia.org/?spec</a>, also licensed under the Apache License, Version 2.0.</p>
<a id="md:disclaimer" class="tsd-anchor"></a><h2><a href="#md:disclaimer">Disclaimer</a></h2><p>You are expected to follow the Wikimedia Foundation <a href="https://foundation.wikimedia.org/wiki/Terms_of_Use">Terms of Use</a> when accessing EventStreams. The package developer(s) are not liable for any damage caused by you using this package.</p>
<p>If you&#39;re developing a bot that runs on Wikimedia wikis which edits based on changes found on EventStreams, be sure to follow the <a href="https://www.mediawiki.org/wiki/Manual:Creating_a_bot#General_guidelines_for_running_a_bot">bot best practices</a> when making edits or other changes. This includes setting a proper user agent (required by <a href="https://meta.wikimedia.org/wiki/User-Agent_policy">policy</a>), which is supported by this package.</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-index-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><h4 class="uppercase">Member Visibility</h4><form><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div><div class="tsd-theme-toggle"><h4 class="uppercase">Theme</h4><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-index-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:wikimedia-streams"><span>wikimedia-<wbr/>streams</span></a><ul><li><a href="#md:setup"><span>Setup</span></a></li><li><a href="#md:usage"><span>Usage</span></a></li><li><ul><li><a href="#md:available-streams"><span>Available streams</span></a></li><li><a href="#md:removed-streams"><span>Removed streams</span></a></li><li><a href="#md:multiple-streams"><span>Multiple streams</span></a></li></ul></li><li><a href="#md:filtering"><span>Filtering</span></a></li><li><ul><li><a href="#md:examples"><span>Examples</span></a></li></ul></li><li><a href="#md:resuming-streams"><span>Resuming streams</span></a></li><li><a href="#md:user-agent"><span>User agent</span></a></li><li><a href="#md:canary-events"><span>Canary events</span></a></li><li><a href="#md:license"><span>License</span></a></li><li><a href="#md:disclaimer"><span>Disclaimer</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>wikimedia-streams</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><div class="tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div></body></html>